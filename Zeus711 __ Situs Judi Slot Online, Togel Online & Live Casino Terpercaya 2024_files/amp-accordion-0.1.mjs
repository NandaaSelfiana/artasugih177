;
(self.AMP=self.AMP||[]).push({m:1,v:"2406131415000",n:"amp-accordion",ev:"0.1",l:!0,f:function(t,n){(()=>{var{isArray:n}=Array;function e(t){return"string"==typeof t}var{hasOwnProperty:i,toString:s}=Object.prototype;function r(t,n,e,i,s,r,o,a,c,h,l){return t}var o="ArrowUp";function a(t,n,e,i){return s=>c.solveYValueFromXValue(s,0,0,t,n,e,i,1,1)}var c=class t{static solveYValueFromXValue(n,e,i,s,r,o,a,c,h){return t.rr(t.hr(n,e,s,o,c),i,r,a,h)}static hr(n,e,i,s,r){const o=1e-6;let a=(n-e)/(r-e);if(a<=0)return 0;if(a>=1)return 1;let c=0,h=1,l=0;for(let u=0;u<8;u++){l=t.ur(a,e,i,s,r);const u=(t.ur(a+o,e,i,s,r)-l)/o;if(Math.abs(l-n)<o)return a;if(Math.abs(u)<o)break;l<n?c=a:h=a,a-=(l-n)/u}for(let u=0;Math.abs(l-n)>o&&u<8;u++)l<n?(c=a,a=(a+h)/2):(h=a,a=(a+c)/2),l=t.ur(a,e,i,s,r);return a}static ur(n,e,i,s,r){if(0==n)return e;if(1==n)return r;let o=t.lr(e,i,n),a=t.lr(i,s,n);const c=t.lr(s,r,n);return o=t.lr(o,a,n),a=t.lr(a,c,n),t.lr(o,a,n)}static rr(n,e,i,s,r){if(0==n)return e;if(1==n)return r;let o=t.lr(e,i,n),a=t.lr(i,s,n);const c=t.lr(s,r,n);return o=t.lr(o,a,n),a=t.lr(a,c,n),t.lr(o,a,n)}static lr(t,n,e){return t+e*(n-t)}},h={LINEAR:t=>t,EASE:t=>c.solveYValueFromXValue(t,0,0,.25,.1,.25,1,1,1),EASE_IN:t=>c.solveYValueFromXValue(t,0,0,.42,0,1,1,1,1),EASE_OUT:t=>c.solveYValueFromXValue(t,0,0,0,0,.58,1,1,1),EASE_IN_OUT:t=>c.solveYValueFromXValue(t,0,0,.42,0,.58,1,1,1)},l={"linear":h.LINEAR,"ease":h.EASE,"ease-in":h.EASE_IN,"ease-out":h.EASE_OUT,"ease-in-out":h.EASE_IN_OUT};function u(t){if(!t)return null;if(e(t)){if(-1!=t.indexOf("cubic-bezier")){const n=t.match(/cubic-bezier\((.+)\)/);if(n){const t=n[1].split(",").map(parseFloat);if(4==t.length){for(let n=0;n<4;n++)if(isNaN(t[n]))return null;return a(t[0],t[1],t[2],t[3])}}return null}return l[t]}return t}var d,f={bubbles:!0,cancelable:!0};function p(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,s=new Error(e);for(const n in t)s[n]=t[n];return s.stack=i,s}function m(t){let n=null,e="";for(const t of arguments)t instanceof Error&&!n?n=p(t):(e&&(e+=" "),e+=t);return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function _(t,...n){const e=m.apply(null,n);e.name=t||e.name,function(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}(e)}var A=["Webkit","webkit","Moz","moz","ms","O","o"];function x(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return A.some((t=>n.startsWith(t+"-")))?`-${n}`:n}function P(t,n,e){if(v(n))return n;d||(d=Object.create(null));let i=d[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),s=function(t,n){for(let e=0;e<A.length;e++){const i=A[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[s]&&(i=s)}e||(d[n]=i)}return i}function b(t,n,e,i,s){const r=P(t.style,n,s);if(!r)return;const o=i?e+i:e;t.style.setProperty(x(r),o)}function g(t,n){for(const e in n)b(t,e,n[e])}function v(t){return t.startsWith("--")}function E(t,n){return(e,i)=>{for(const r in n)b(t,("display"===(s=r)&&_("STYLE","`display` style detected. You must use toggle instead."),s),n[r](e,i));var s}}function M(t,n){return e=>t+(n-t)*e}function w(t){return n=>`${t(n)}px`}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function T(t,n){throw new Error("failed to call initLogConstructor")}function I(t){return y.user||(y.user=V()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(y.user.win,t)?y.userForEmbed||(y.userForEmbed=V()):y.user}function V(t){return T()}function R(){return y.dev||(y.dev=T())}function S(t,n,e,i,s,r,o,a,c,h,l){return t}function k(t,n,e,i,s,r,o,a,c,h,l){return I().assert(t,n,e,i,s,r,o,a,c,h,l)}function O(t,n){return N(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function F(t){return t.nodeType?(e=t,n=(e.ownerDocument||e).defaultView,O(n,"ampdoc")).getAmpDoc(t):t;var n,e}function N(t,n){S($(t,n));const e=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(S(e.ctor),S(e.context),e.obj=new e.ctor(e.context),S(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function $(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var j="Animation",D=function(){},C=class t{static animate(n,e,i,s){return new t(n).setCurve(s).add(0,e,1).start(i)}constructor(t,n){this.cr=t,this.ar=n||O(self,"vsync"),this.dr=null,this.pr=[]}setCurve(t){return t&&(this.dr=u(t)),this}add(t,n,e,i){return this.pr.push({delay:t,func:n,duration:e,curve:u(i)}),this}start(t){return new H(this.ar,this.cr,this.pr,this.dr,t)}},H=class{constructor(t,n,e,i,s){this.ar=t,this.cr=n,this.pr=[];for(let t=0;t<e.length;t++){const n=e[t];this.pr.push({delay:n.delay,func:n.func,duration:n.duration,curve:n.curve||i,started:!1,completed:!1})}this.mr=s,this.zn=Date.now(),this.be=!0,this.Ai={};const r=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}};this._r=r.promise,this.te=r.resolve,this.Ar=r.reject,this.gr=this.ar.createAnimTask(this.cr,{mutate:this.Pr.bind(this)}),this.ar.canAnimate(this.cr)?this.gr(this.Ai):this.vr(!1,0)}then(t,n){return t||n?this._r.then(t,n):this._r}thenAlways(t){const n=t||D;return this.then(n,n)}halt(t){this.vr(!1,t||0)}vr(t,n){if(this.be){if(this.be=!1,0!=n){this.pr.length>1&&this.pr.sort(((t,n)=>t.delay+t.duration-(n.delay+n.duration)));try{if(n>0)for(let t=0;t<this.pr.length;t++)this.pr[t].func(1,!0);else for(let t=this.pr.length-1;t>=0;t--)this.pr[t].func(0,!1)}catch(n){R().error(j,"completion failed: "+n,n),t=!1}}t?this.te():this.Ar()}}Pr(t){if(!this.be)return;const n=Date.now(),e=Math.min((n-this.zn)/this.mr,1);for(let t=0;t<this.pr.length;t++){const n=this.pr[t];!n.started&&e>=n.delay&&(n.started=!0)}for(let t=0;t<this.pr.length;t++){const n=this.pr[t];n.started&&!n.completed&&this.Er(n,e)}1==e?this.vr(!0,0):this.ar.canAnimate(this.cr)?this.gr(this.Ai):this.vr(!1,0)}Er(t,n){let e,i;if(t.duration>0){if(e=Math.min((n-t.delay)/t.duration,1),i=e,t.curve&&1!=i)try{i=t.curve(e)}catch(t){return R().error(j,"step curve failed: "+t,t),void this.vr(!1,0)}}else e=1,i=1;1==e&&(t.completed=!0);try{t.func(i,t.completed)}catch(t){return R().error(j,"step mutate failed: "+t,t),void this.vr(!1,0)}}},L="amp-accordion",z=a(.47,0,.745,.715),U=a(.39,.575,.565,1),Y=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.E0=[],this.w0=null,this.y0=null,this.T0=!1,this.zw=null,this.tc=null,this.WD=t.id?t.id:Math.floor(100*Math.random())}isLayoutSupported(t){return"container"==t}buildCallback(){this.tc=function(t,n){const e=function(t){const n=F(t);return n.isSingleDoc()?n.win:n}(F(t));return $(e,n)?N(e,n):null}(this.element,"action"),this.T0=this.element.hasAttribute("disable-session-states"),this.w0=this.V0(),this.y0=this.R0(),this.zw=function(t,n){const i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)!(function(t){let n;var i;return e(t)?n=t:1==(null==(i=t)?void 0:i.nodeType)&&(n=t.tagName),!!n&&n.toLowerCase().startsWith("i-")}(s=n)||s.nodeType===Node.ELEMENT_NODE&&(s.hasAttribute("placeholder")||s.hasAttribute("fallback")||s.hasAttribute("overflow")))&&i.push(n);var s;return i}(this.element),this.zw.forEach(((t,n)=>{k("section"==t.tagName.toLowerCase(),"Sections should be enclosed in a <section> tag, See https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md. Found in: %s",this.element);const e=t.children;k(2==e.length,"Each section must have exactly two children. See https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md. Found in: %s",this.element);const{0:i,1:s}=e;s.classList.add("i-amphtml-accordion-content");let r=s.getAttribute("id");r||(r=this.WD+"_AMP_content_"+n,s.setAttribute("id",r));let o=i.getAttribute("id");o||(o=this.WD+"_AMP_header_"+n,i.setAttribute("id",o)),this.registerAction("toggle",(t=>this.S0(t))),this.registerAction("expand",(t=>this.S0(t))),this.registerAction("collapse",(t=>this.S0(t))),this.tc.addToAllowlist(L,["toggle","expand","collapse"],["email"]),new this.win.MutationObserver((t=>{this.k0(t,2)})).observe(t,{attributes:!0,attributeFilter:["data-expand"]}),this.y0[r]?t.setAttribute("expanded",""):!1===this.y0[r]&&t.removeAttribute("expanded"),this.mutateElement((()=>{})),k(!t.hasAttribute("[expanded]")&&!t.hasAttribute("data-amp-bind-expanded"),'The "expanded" attribute cannot be used with amp-bind in version 0.1 of amp-accordion. Please bind to [data-expand] instead. Found in: %s',this.element);const a=t.hasAttribute("expanded");i.classList.add("i-amphtml-accordion-header"),i.hasAttribute("role")||i.setAttribute("role","button"),i.setAttribute("aria-controls",r),i.setAttribute("aria-expanded",String(a)),i.hasAttribute("tabindex")||i.setAttribute("tabindex",0),this.E0.push(i),s.setAttribute("aria-labelledby",o),s.hasAttribute("role")||s.setAttribute("role","region"),k(0==this.tc.hasAction(i,"tap",t),"amp-accordion headings should not have tap actions registered."),i.addEventListener("click",this.$$.bind(this)),i.addEventListener("keydown",this.ZU.bind(this))}))}S0(t){const{args:n,method:e,trust:i}=t;let s;if("expand"===e?s=!0:"collapse"===e&&(s=!1),n){const t=n.section;let e=this.getAmpDoc().getElementById(t);e=I().assertElement(e),k(e,"No element found with id: %s",t),this.V$(e,i,s)}else for(let t=0;t<this.zw.length;t++)this.V$(this.zw[t],i,s)}V0(){return`amp-${this.element.id||this.element.getResourceId()}-${function(t){const n=t.indexOf("#");return-1==n?t:t.substring(0,n)}(this.win.location.href)}`}R0(){if(this.T0)return{};try{const n=this.win.sessionStorage.getItem(this.w0);return n?S((t=n,JSON.parse(t))):{}}catch(t){return{}}var t}O0(){if(this.T0)return;const t=JSON.stringify(this.y0);try{this.win.sessionStorage.setItem(this.w0,t)}catch(t){}}cb(t,n,e){const i=function(t,n,e,i){const s={detail:{}};return Object.assign(s,void 0),new t.CustomEvent(n,s)}(this.win,`accordionSection.${t}`);this.tc.trigger(n,t,i,e),function(t,n,e,i){r(t.ownerDocument);const{bubbles:s,cancelable:o}=f,a=new MessageEvent(n,{data:{},bubbles:s,cancelable:o});t.dispatchEvent(a)}(this.element,t)}V$(t,n,e){const i=t.children,s=i[0],r=i[1].getAttribute("id"),o=t.hasAttribute("expanded"),a=null==e?!t.hasAttribute("expanded"):e;a&&t.hasAttribute("expanded")||!a&&!t.hasAttribute("expanded")||(this.element.hasAttribute("animate")?a?(s.setAttribute("aria-expanded","true"),this.F0(t,n),this.element.hasAttribute("expand-single-section")&&this.zw.forEach((e=>{e!=t&&(this.N0(e,n),e.children[0].setAttribute("aria-expanded","false"))}))):(s.setAttribute("aria-expanded","false"),this.N0(t,n)):this.mutateElement((()=>{a?(this.cb("expand",t,n),t.setAttribute("expanded",""),s.setAttribute("aria-expanded","true"),this.element.hasAttribute("expand-single-section")&&this.zw.forEach((e=>{e!=t&&(e.hasAttribute("expanded")&&(this.cb("collapse",e,n),e.removeAttribute("expanded")),e.children[0].setAttribute("aria-expanded","false"))}))):(this.cb("collapse",t,n),t.removeAttribute("expanded"),s.setAttribute("aria-expanded","false"))}),t),this.y0[r]=!o,this.O0())}F0(t,n){let e,i,s,r,o;const a=t.children[1];return this.measureMutateElement((()=>{e=t.offsetWidth,o=function(t,n,e){const i=P(t.style,"width",void 0);if(i)return v(i)?t.style.getPropertyValue(i):t.style[i]}(a)}),(()=>{!function(t,n){const{style:e}=t;for(const t in n)e.setProperty(x(P(e,t)),String(n[t]),"important")}(a,{"position":"fixed","width":`${e}px`,"opacity":"0"}),t.hasAttribute("expanded")||t.setAttribute("expanded","")})).then((()=>this.measureMutateElement((()=>{i=t.offsetHeight,s=a.offsetHeight;const n=this.getViewport().getHeight();r=this.$0(Math.abs(s),n)}),(()=>{g(t,{"overflow":"hidden","height":`${i}px`}),g(a,{"position":"","opacity":"","width":o})})))).then((()=>{const e=new C(this.element);return e.setCurve(z),e.add(0,E(t,{"height":w(M(i,i+s))}),1),e.add(0,E(a,{"opacity":M(0,1)}),1),e.start(r).thenAlways((()=>{this.mutateElement((()=>{this.cb("expand",t,n),g(t,{"overflow":"","height":""}),g(a,{"opacity":""})}))}))}))}N0(t,n){let e,i,s;const r=t.firstElementChild;return this.measureMutateElement((()=>{e=t.offsetHeight,i=r.offsetHeight;const n=this.getViewport().getSize().height;s=this.$0(Math.abs(e),n)}),(()=>{g(t,{"overflow":"hidden"})})).then((()=>C.animate(t,E(t,{"height":w(M(e,i))}),s,U).thenAlways((()=>this.mutateElement((()=>{t.hasAttribute("expanded")&&(this.cb("collapse",t,n),t.removeAttribute("expanded")),g(t,{"height":"","overflow":""})}))))))}$0(t,n,e=200,i=500){return s=Math.abs(t)/n*i,r((o=e)<=(a=i)),Math.min(Math.max(s,o),a);var s,o,a}j0(t){t.preventDefault();const n=t.currentTarget.parentElement;this.V$(n,3)}$$(t){this.H$(t)&&this.j0(t)}H$(t){const n=t.target,e=t.currentTarget,i=!!function(t,n,e){let i;for(i=t;i&&i!==e;i=i.parentElement)if("A"==i.tagName)return i;return null}(n,0,e),s=this.tc.hasAction(n,"tap",e);return!i&&!s}ZU(t){if(t.defaultPrevented)return;const{key:n}=t;switch(n){case o:case"ArrowDown":return void this.aK(t);case"Enter":case" ":return void(t.target==t.currentTarget&&this.j0(t))}}aK(t){const n=t.currentTarget,e=this.E0.indexOf(n);if(-1!==e){t.preventDefault();let n=(e+(t.key==o?-1:1))%this.E0.length;n<0&&(n+=this.E0.length),function(t){try{t.focus()}catch(t){}}(this.E0[n])}}k0(t,n){t.forEach((t=>{const e=t.target,i=e.hasAttribute("data-expand");e.hasAttribute("expanded")!==i&&this.V$(e,n,i)}))}getActionServiceForTesting(){return this.tc}};t.registerElement(L,Y,"amp-accordion>section>:last-child{display:none!important}amp-accordion>section[expanded]>:last-child{display:block!important}.i-amphtml-accordion-content,.i-amphtml-accordion-header{margin:0}.i-amphtml-accordion-header{cursor:pointer;background-color:#efefef;padding-right:20px;border:1px solid #dfdfdf}amp-accordion>section:not([expanded]) .i-amphtml-media-component,amp-accordion>section:not([expanded]) .i-amphtml-media-component *{display:none!important;visibility:hidden!important}\n/*# sourceURL=/extensions/amp-accordion/0.1/amp-accordion.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-accordion-0.1.mjs.map